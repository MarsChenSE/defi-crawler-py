{
  "protocol": {
    "name": "AAVE",
    "type": "Lending",
    "version": 2,
    "chain": "Ethereum",
    "endpoint": {
      "ethereum": "https://api.thegraph.com/subgraphs/name/aave/protocol-v2"
    }
  },
  "entities": {
    "borrow": {
      "attributes": {
        "user": [
          "user",
          "id"
        ],
        "token": [
          "reserve",
          "symbol"
        ],
        "amount": [
          "amount"
        ],
        "timestamp": [
          "timestamp"
        ]
      },
      "query": {
        "fields": {
          "user": [
            "user",
            "id"
          ],
          "token": [
            "reserve",
            "symbol"
          ],
          "amount": [
            "amount"
          ],
          "timestamp": [
            "timestamp"
          ],
          "decimals": [
            "reserve",
            "decimals"
          ]
        },
        "name": "borrows",
        "params": {
          "orderBy": "timestamp"
        }
      },
      "transformations": {
        "amount": "decimals"
      }
    },
    "deposit": {
      "attributes": {
        "user": [
          "user",
          "id"
        ],
        "token": [
          "reserve",
          "symbol"
        ],
        "amount": [
          "amount"
        ],
        "timestamp": [
          "timestamp"
        ]
      },
      "query": {
        "fields": {
          "user": [
            "user",
            "id"
          ],
          "token": [
            "reserve",
            "symbol"
          ],
          "amount": [
            "amount"
          ],
          "timestamp": [
            "timestamp"
          ],
          "decimals": [
            "reserve",
            "decimals"
          ]
        },
        "name": "deposits",
        "params": {
          "orderBy": "timestamp"
        }
      },
      "transformations": {
        "amount": "decimals"
      }
    },
    "liquidation": {
      "attributes": {
        "user": [
          "user",
          "id"
        ],
        "token_principal": [
          "principalReserve",
          "symbol"
        ],
        "token_collateral": [
          "collateralReserve",
          "symbol"
        ],
        "amount_principal": [
          "principalAmount"
        ],
        "amount_collateral": [
          "collateralAmount"
        ],
        "liquidator": [
          "liquidator"
        ],
        "timestamp": [
          "timestamp"
        ]
      },
      "query": {
        "fields": {
          "user": [
            "user",
            "id"
          ],
          "token_principal": [
            "principalReserve",
            "symbol"
          ],
          "token_collateral": [
            "collateralReserve",
            "symbol"
          ],
          "amount_principal": [
            "principalAmount"
          ],
          "amount_collateral": [
            "collateralAmount"
          ],
          "liquidator": [
            "liquidator"
          ],
          "timestamp": [
            "timestamp"
          ],
          "principal_decimals": [
            "principalReserve",
            "decimals"
          ],
          "collateral_decimals": [
            "collateralReserve",
            "decimals"
          ]
        },
        "name": "liquidationCalls",
        "params": {
          "orderBy": "timestamp"
        }
      },
      "transformations": {
        "amount_principal": "principal_decimals",
        "amount_collateral":"collateral_decimals"
      }
    },
    "repay": {
      "attributes": {
        "user": [
          "user",
          "id"
        ],
        "token": [
          "reserve",
          "symbol"
        ],
        "amount": [
          "amount"
        ],
        "timestamp": [
          "timestamp"
        ]
      },
      "query": {
        "name": "repays",
        "fields": {
          "user": [
            "user",
            "id"
          ],
          "token": [
            "reserve",
            "symbol"
          ],
          "amount": [
            "amount"
          ],
          "timestamp": [
            "timestamp"
          ],
          "decimals": [
            "reserve",
            "decimals"
          ]
        },
        "params": {
          "orderBy": "timestamp"
        }
      },
      "transformations": {
        "amount": "decimals"
      }
    },
    "user": {
      "attributes": {
        "user_id": [
          "id"
        ],
        "active_loans": [
          "borrowedReservesCount"
        ],
        "liquidations_count": [
          "id"
        ]
      },
      "query": {
        "name": "users",
        "fields": {
          "user_id": [
            "id"
          ],
          "active_loans": [
            "borrowedReservesCount"
          ],
          "liquidations_count": [
            "liquidationCallHistory",
            "id"
          ]
        },
        "params": {
          "orderBy": "id",
          "initial_value": "0"
        }
      },
      "transformations": {
        "liquidations_count": "array_length"
      }
    },
    "user_position": {
      "attributes": {
        "user_id": [
          "user",
          "id"
        ],
        "symbol": [
          "reserve",
          "symbol"
        ],
        "debt_amount": [
          "currentTotalDebt"
        ],
        "collateral_amount": [
          "currentATokenBalance"
        ]
      },
      "query": {
        "name": "userReserves",
        "fields": {
          "user_id": [
            "user",
            "id"
          ],
          "symbol": [
            "reserve",
            "symbol"
          ],
          "debt_amount": [
            "currentTotalDebt"
          ],
          "collateral_amount": [
            "currentATokenBalance"
          ]
        },
        "params": {
          "user": "user"
        }
      },
      "transformations": []
    }
  }
}